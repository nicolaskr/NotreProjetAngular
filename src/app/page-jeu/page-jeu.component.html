<div class="container">
  <div
    *ngFor="let player of sessions | async"
    class="row row-cols-2"
    style="-bs-gutter-y: 20px"
  >
    <div
      *ngIf="player.tourEnCours == true"
      class="row"
      style="
        padding-top: calc(var(--bs-gutter-x) * 0.5);
        padding-bottom: calc(var(--bs-gutter-x) * 0.5);
        height: 50%;
        padding-right: 5%;
      "
    >
      <h2>{{ player.id?.compte?.nom }}</h2>
      <table class="table table-striped">
        <tr>
          <th *ngFor="let sr of player.sessionRessource">
            <img
              *ngIf="ressourceBool('bois', sr)"
              height="40px"
              width="40px"
              src="images/bois.jpg"
              alt=" bois"
            />
            <div *ngIf="ressourceBool('bois', sr)">: {{ sr.quantite }}</div>

            <img
              *ngIf="ressourceBool('pierre', sr)"
              height="40px"
              width="40px"
              src="http://produitsversailles.com/wp-content/uploads/2018/06/pierre-polie-semi-grise-_105643-red-copy-300x300.png"
              alt="pierre"
            />
            <div *ngIf="ressourceBool('pierre', sr)">: {{ sr.quantite }}</div>

            <img
              *ngIf="ressourceBool('minerais', sr)"
              height="40px"
              width="40px"
              src="http://www.a3m-asso.fr/wp-content/uploads/2016/07/ERAMET-Minerai-300x200.jpg"
              alt="minerais"
            />
            <div *ngIf="ressourceBool('minerais', sr)">: {{ sr.quantite }}</div>

            <img
              *ngIf="ressourceBool('fer', sr)"
              height="40px"
              width="40px"
              src="https://www.corse-epoxy.fr/wp-content/uploads/2016/09/profil-acier-720x340.jpg"
              alt="fer"
            />
            <div *ngIf="ressourceBool('fer', sr)">: {{ sr.quantite }}</div>

            <img
              *ngIf="ressourceBool('cuivre', sr)"
              height="40px"
              width="40px"
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/NatCopper.jpg/220px-NatCopper.jpg"
              alt="cuivre"
            />
            <div *ngIf="ressourceBool('cuivre', sr)">: {{ sr.quantite }}</div>

            <img
              *ngIf="ressourceBool('or', sr)"
              height="40px"
              width="40px"
              src="https://blog.arpp.org/wp-content/uploads/sites/5/2019/09/or-.jpg"
              alt="or"
            />
            <div *ngIf="ressourceBool('or', sr)">: {{ sr.quantite }}</div>
          </th>
        </tr>
      </table>
      <table class="table table-striped">
        <tr>
          <th>Batiment</th>
          <th>Attaque</th>
          <th>Défense</th>
          <th>Niveau</th>
        </tr>
        <tr *ngFor="let sb of player.sessionBatiment">
          <td>{{ sb.batiment.nom }}</td>
          <td>{{ sb.ptAttaque }}</td>
          <td>{{ sb.pv }}</td>
          <td>{{ sb.level }}</td>
        </tr>
      </table>
      <table class="table table-striped">
        <tr>
          <th>Total</th>
          <th>Attaque: {{ player!.att }}</th>
          <th>Défense: {{ player!.def }}</th>
        </tr>
      </table>

      <div>
        <button
          type="button"
          class="btn btn-primary"
          (click)="clickConstruction()"
        >
          Construire
        </button>
        <button
          type="submit"
          class="btn btn-success"
          (click)="clickAmelioration()"
        >
          Améliorer
        </button>
        <button
          type="button"
          class="btn btn-warning"
          (click)="clickTransformation()"
        >
          Transformer
        </button>
        <button type="submit" class="btn btn-danger" (click)="clickAttaque()">
          Attaquer
        </button>
        <button
          type="button"
          class="btn btn-dark"
          (click)="clickFinDeTour(player)"
        >
          Fin du tour
        </button>
      </div>

      <app-menu-construction
        *ngIf="afficherMenuConstruction"
        [session]="player"
      ></app-menu-construction>
      <app-menu-amelioration
        *ngIf="afficherMenuAmelioration"
        [session]="j1"
      ></app-menu-amelioration>
      <app-menu-transformation
        *ngIf="afficherMenuTransformation"
        [session]="j1"
      ></app-menu-transformation>
      <app-menu-attaque *ngIf="afficherMenuAttaque"></app-menu-attaque>
    </div>
  </div>

  <div class="row" *ngFor="let p of sessions | async">
    <h2 *ngIf="p.tourEnCours == false">{{ p.id?.compte?.nom }}</h2>
    <table *ngIf="p.tourEnCours == false" class="table table-striped">
      <tr>
        <th *ngFor="let sr of p.sessionRessource">
          <img
            *ngIf="ressourceBool('bois', sr)"
            height="40px"
            width="40px"
            src="images/bois.jpg"
            alt=" bois"
          />
          <div *ngIf="ressourceBool('bois', sr)">: {{ sr.quantite }}</div>

          <img
            *ngIf="ressourceBool('pierre', sr)"
            height="40px"
            width="40px"
            src="http://produitsversailles.com/wp-content/uploads/2018/06/pierre-polie-semi-grise-_105643-red-copy-300x300.png"
            alt="pierre"
          />
          <div *ngIf="ressourceBool('pierre', sr)">: {{ sr.quantite }}</div>

          <img
            *ngIf="ressourceBool('minerais', sr)"
            height="40px"
            width="40px"
            src="http://www.a3m-asso.fr/wp-content/uploads/2016/07/ERAMET-Minerai-300x200.jpg"
            alt="minerais"
          />
          <div *ngIf="ressourceBool('minerais', sr)">: {{ sr.quantite }}</div>

          <img
            *ngIf="ressourceBool('fer', sr)"
            height="40px"
            width="40px"
            src="https://www.corse-epoxy.fr/wp-content/uploads/2016/09/profil-acier-720x340.jpg"
            alt="fer"
          />
          <div *ngIf="ressourceBool('fer', sr)">: {{ sr.quantite }}</div>

          <img
            *ngIf="ressourceBool('cuivre', sr)"
            height="40px"
            width="40px"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/NatCopper.jpg/220px-NatCopper.jpg"
            alt="cuivre"
          />
          <div *ngIf="ressourceBool('cuivre', sr)">: {{ sr.quantite }}</div>

          <img
            *ngIf="ressourceBool('or', sr)"
            height="40px"
            width="40px"
            src="https://blog.arpp.org/wp-content/uploads/sites/5/2019/09/or-.jpg"
            alt="or"
          />
          <div *ngIf="ressourceBool('or', sr)">: {{ sr.quantite }}</div>
        </th>
      </tr>
    </table>
    <table *ngIf="p.tourEnCours == false" class="table table-striped">
      <tr>
        <th>Batiment</th>
        <th>Attaque</th>
        <th>Défense</th>
        <th>Niveau</th>
      </tr>
      <tr *ngFor="let sb of p.sessionBatiment">
        <td>{{ sb.batiment.nom }}</td>
        <td>{{ sb.ptAttaque }}</td>
        <td>{{ sb.pv }}</td>
        <td>{{ sb.level }}</td>
      </tr>
    </table>
    <table *ngIf="p.tourEnCours == false" class="table table-striped">
      <tr>
        <th>Total</th>
        <th>Attaque: {{ p.att }}</th>
        <th>Défense: {{ p.def }}</th>
      </tr>
    </table>
  </div>
  <!-- <app-page-spectateur></app-page-spectateur> -->
</div>
